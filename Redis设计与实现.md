
## Redis数据结构

### SDS, simple dynamic string

Redis中的数据key-value中，字符串用SDS数据结构来存储，而非C的传统字符串。

SDS有如下优势：  
1. SDS直接记录了字符串的长度，从而可以直接获取字符串长度，而C字符串每次需要遍历字节数目。
2. SDS拼接可以避免溢出，在拼接时会执行分配空间的操作。
3. 减少了字符串变化导致的空间分配和回收的代价。SDS会预分配空间，避免每次字符扩展都需要重新分配空间。在缩减字符时，会惰释放空间，只改变记录的free空间长度。
4. SDS二进制安全。空字符在SDS不会被作为字符串的结束符。

### 链表

Redis自己实现了一套链表，并在系统中广泛使用。

### 字典

Redis同样实现了自己的字典结构。采用的也是经典的实现方式：  
1. 首先维护一个数组，用来存放kv节点。包括表的大小，已使用量，hashmask。
2. 每个kv节点可以连接其他kv节点，构成链表，以解决碰撞问题。
3. 